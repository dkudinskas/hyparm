menu "General setup"

config BUILD_LTO
  bool "Link-time optimization (requires toolchain support)"

config BUILD_SAVE_TEMPS
  bool "Save intermediate files during build (requires GCC >= 4.5)"

choice
  prompt "Decoder"
  default DECODER_TABLE_SEARCH

config DECODER_AUTO
  bool "Auto-generated decoder"
  select THUMB_IGNORE_IT if THUMB2

config DECODER_TABLE_SEARCH
  bool "Handcrafted table search decoder"

endchoice

config BLOCK_COPY
  bool "Block copy"
  depends on DECODER_TABLE_SEARCH

config PATH_AUTODECODER
  string "Path to autodecoder"

endmenu

menu "Physical hardware platform"

config ARCH_V7
  bool

config ARCH_V7_A
  bool
  depends on ARCH_V7

config ARCH_EXT_SECURITY
  bool
  depends on ARCH_V7_A

config CPU_CORTEX_A8
  bool
  depends on ARCH_V7_A

config CPU_CORTEX_A9
  bool
  depends on ARCH_V7_A

config SOC_TI_OMAP_3
  bool
  depends on CPU_CORTEX_A8

config SOC_TI_OMAP_35XX
  bool
  depends on SOC_TI_OMAP_3

config SOC_TI_OMAP_3530
  bool
  depends on SOC_TI_OMAP_35XX

config SOC_TI_OMAP_4
  bool
  depends on CPU_CORTEX_A9

config SOC_TI_OMAP_4430
  bool
  depends on SOC_TI_OMAP_4

choice
  prompt "Board"
  default BOARD_TI_BEAGLE_BOARD

config BOARD_TI_BEAGLE_BOARD
  bool "Texas Instruments BeagleBoard"
  select ARCH_V7
  select ARCH_V7_A
  select ARCH_EXT_SECURITY
  select CPU_CORTEX_A8
  select SOC_TI_OMAP_3
  select SOC_TI_OMAP_35XX
  select SOC_TI_OMAP_3530

config BOARD_TI_PANDA_BOARD
  bool "Texas Instruments PandaBoard"
  select ARCH_V7
  select ARCH_V7_A
  select ARCH_EXT_SECURITY
  select CPU_CORTEX_A9
  select SOC_TI_OMAP_4
  select SOC_TI_OMAP_4430

endchoice

config UART_FAST
  bool "Fast UART (baud rate 500000)"
  depends on BOARD_TI_BEAGLE_BOARD

endmenu

menu "Virtual hardware platform"

config THUMB2
  bool "Thumb-2 instruction set"
  depends on ARCH_V7_A && !BLOCK_COPY

endmenu

menu "Guest software"

config GUEST_FREERTOS
  bool "FreeRTOS"
  depends on THUMB2
  select THUMB_IGNORE_IT

endmenu

menuconfig DEBUG
  bool "Debugging"
  default y

config DEBUG_STARTUP
  bool "Debug startup"
  depends on DEBUG

config DEBUG_MALLOC
  bool "Debug malloc"
  depends on DEBUG

config DEBUG_GUEST_CONTEXT
  bool "Debug guest context routines"
  default y
  depends on DEBUG

config DEBUG_EXCEPTION_HANDLERS
  bool "Debug exception handlers"
  depends on DEBUG

config DEBUG_EXCEPTION_HANDLERS_TRACE_DABT
  bool "Trace data aborts"
  depends on DEBUG

config DEBUG_GUEST_EXCEPTIONS
  bool "Debug guest exceptions"
  depends on DEBUG

config DEBUG_DECODER
  bool "Debug instruction decoding"
  depends on DEBUG

config DEBUG_SCANNER
  bool "Debug scanner"
  depends on DEBUG

config DEBUG_SCANNER_COUNT_BLOCKS
  bool "Print number of scanned blocks"
  depends on DEBUG_SCANNER
  select SCANNER_COUNT_BLOCKS

config DEBUG_SCANNER_BLOCK_TRACE
  bool "Print block trace"
  depends on DEBUG_SCANNER

config DEBUG_BLOCK_CACHE
  bool "Debug block cache"
  depends on DEBUG

config DEBUG_INTERPRETER
  bool "Debug interpreter"
  depends on DEBUG

menuconfig DEBUG_INTERPRETER_ALL
  bool "Debug interpreter for all instruction sets"
  depends on DEBUG_INTERPRETER
  select DEBUG_INTERPRETER_ARM
  select DEBUG_INTERPRETER_T16
  select DEBUG_INTERPRETER_T32

config DEBUG_INTERPRETER_ALL_BRANCH
  bool "Debug branch operations"
  depends on DEBUG_INTERPRETER_ALL
  select DEBUG_INTERPRETER_ARM_BRANCH
  select DEBUG_INTERPRETER_T16_BRANCH
  select DEBUG_INTERPRETER_T32_BRANCH

config DEBUGINTERPRETER_ALL_COPROC
  bool "Debug coprocessor operations"
  depends on DEBUG_INTERPRETER_ALL
  select DEBUG_INTERPRETER_ARM_COPROC
  select DEBUG_INTERPRETER_T32_COPROC

config DEBUG_INTERPRETER_ALL_LOAD
  bool "Debug load operations"
  depends on DEBUG_INTERPRETER_ALL
  select DEBUG_INTERPRETER_ARM_LOAD
  select DEBUG_INTERPRETER_ARM_LOAD_SYNC
  select DEBUG_INTERPRETER_T16_LOAD
  select DEBUG_INTERPRETER_T32_LOAD

config DEBUG_INTERPRETER_ALL_STORE
  bool "Debug store operations"
  depends on DEBUG_INTERPRETER_ALL
  select DEBUG_INTERPRETER_ARM_STORE
  select DEBUG_INTERPRETER_ARM_STORE_SYNC
  select DEBUG_INTERPRETER_T16_STORE
  select DEBUG_INTERPRETER_T32_STORE

config DEBUG_INTERPRETER_ALL_SYNC
  bool"Debug synchronization operations"
  depends on DEBUG_INTERPRETER_ALL
  select DEBUG_INTERPRETER_ARM_LOAD_SYNC
  select DEBUG_INTERPRETER_ARM_STORE_SYNC
  select DEBUG_INTERPRETER_ARM_SYNC

menuconfig DEBUG_INTERPRETER_ARM
  bool "Debug ARM interpreter"
  depends on DEBUG_INTERPRETER

config DEBUG_INTERPRETER_ARM_BRANCH
  bool "Debug branch operations"
  depends on DEBUG_INTERPRETER_ARM

config DEBUG_INTERPRETER_ARM_COPROC
  bool "Debug coprocessor operations"
  depends on DEBUG_INTERPRETER_ARM

config DEBUG_INTERPRETER_ARM_LOAD
  bool "Debug load operations"
  depends on DEBUG_INTERPRETER_ARM
  select DEBUG_INTERPRETER_ARM_LOAD_SYNC

config DEBUG_INTERPRETER_ARM_LOAD_SYNC
  bool
  depends on DEBUG_INTERPRETER_ARM

config DEBUG_INTERPRETER_ARM_STORE
  bool "Debug store operations"
  depends on DEBUG_INTERPRETER_ARM
  select DEBUG_INTERPRETER_ARM_STORE_SYNC

config DEBUG_INTERPRETER_ARM_STORE_SYNC
  bool
  depends on DEBUG_INTERPRETER_ARM

config DEBUG_INTERPRETER_ARM_SYNC
  bool "Debug synchronization operations"
  depends on DEBUG_INTERPRETER_ARM
  select DEBUG_INTERPRETER_ARM_LOAD_SYNC
  select DEBUG_INTERPRETER_ARM_STORE_SYNC

menuconfig DEBUG_INTERPRETER_T16
  bool "Debug Thumb 16-bit interpreter"
  depends on DEBUG_INTERPRETER

config DEBUG_INTERPRETER_T16_BRANCH
  bool "Debug branch operations"
  depends on DEBUG_INTERPRETER_T16

config DEBUG_INTERPRETER_T16_LOAD
  bool "Debug load operations"
  depends on DEBUG_INTERPRETER_T16

config DEBUG_INTERPRETER_T16_STORE
  bool "Debug store operations"
  depends on DEBUG_INTERPRETER_T16

menuconfig DEBUG_INTERPRETER_T32
  bool "Debug Thumb 32-bit interpreter"
  depends on DEBUG_INTERPRETER

config DEBUG_INTERPRETER_T32_BRANCH
  bool "Debug branch operations"
  depends on DEBUG_INTERPRETER_T32

config DEBUG_INTERPRETER_T32_COPROC
  bool "Debug coprocessor operations"
  depends on DEBUG_INTERPRETER_T32

config DEBUG_INTERPRETER_T32_LOAD
  bool "Debug load operations"
  depends on DEBUG_INTERPRETER_T32

config DEBUG_INTERPRETER_T32_STORE
  bool "Debug store operations"
  depends on DEBUG_INTERPRETER_T32

menuconfig DEBUG_PHYSICAL_PLATFORM
  bool "Debug physical hardware platform (drivers)"
  depends on DEBUG

config DEBUG_PP_OMAP_35XX_TIMER32K
  bool "Debug 32 kHz timer (TIMER32K)"
  depends on DEBUG_PHYSICAL_PLATFORM

config DEBUG_PP_OMAP_35XX_CM
  bool "Debug clock manager (CM)"
  depends on DEBUG_PHYSICAL_PLATFORM

config DEBUG_PP_OMAP_35XX_GPTIMER
  bool "Debug general purpose timers (GPTIMER)"
  depends on DEBUG_PHYSICAL_PLATFORM

config DEBUG_PP_OMAP_35XX_INTC
  bool "Debug interrupt controller (INTC)"
  depends on DEBUG_PHYSICAL_PLATFORM

config DEBUG_PP_OMAP_35XX_MMCHS
  bool "Debug MMC host controller (MMCHS)"
  depends on DEBUG_PHYSICAL_PLATFORM

config DEBUG_PP_OMAP_35XX_UART
  bool "Debug UART"
  depends on DEBUG_PHYSICAL_PLATFORM

menuconfig DEBUG_VIRTUAL_PLATFORM
  bool "Debug virtual hardware platform (emulation)"
  depends on DEBUG

config DEBUG_VP_OMAP_35XX_LIBRARY
  bool "Debug device library"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_TIMER32K
  bool "Debug 32 kHz timer (TIMER32K)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_CM
  bool "Debug clock manager (CM)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_GPIO
  bool "Debug GPIO"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_GPTIMER
  bool "Debug general purpose timers (GPTIMER)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_INTC
  bool "Debug interrupt controller (INTC)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_GPMC
  bool "Debug memory controller (GPMC)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_PRM
  bool "Debug power and reset manager (PRM)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SCM
  bool "Debug system control module (SCM)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SDMA
  bool "Debug SDMA"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SDRAM
  bool "Debug SDRAM"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SRAM
  bool "Debug SRAM"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_UART
  bool "Debug UART"
  depends on DEBUG_VIRTUAL_PLATFORM

config MMC
  bool "Use MMC/SD device to store debug output"
  depends on DEBUG

config DEBUG_MMC
  bool "Debug MMC block device"
  depends on MMC

config DEBUG_PARTITIONS
  bool "Debug partition detection"
  depends on MMC

config DEBUG_FS_FAT
  bool "Debug FAT file system"
  depends on MMC

menu "Hacks"

config BLOCK_COPY_NO_IRQ
  bool "Disable interrupts"
  depends on BLOCK_COPY

config CLI
  bool "Command-line interface"

config EMERGENCY_EXCEPTION_VECTOR
  bool "Emergency exception vector"
  default y
  depends on ARCH_EXT_SECURITY

config EXCEPTION_HANDLERS_COUNT_DATA_ABORT
  bool "Count number of data aborts"

config EXCEPTION_HANDLERS_COUNT_IRQ
  bool "Count number of interrupts (IRQs)"

config EXCEPTION_HANDLERS_COUNT_SVC
  bool "Count number of software interrupts"

config SCANNER_COUNT_BLOCKS
  bool "Count number of scanned blocks"

config SCANNER_EXTRA_CHECKS
  bool "Track call source and check for null pointers in scanner"

config GUEST_CONTEXT_BLOCK_TRACE
  bool "Store block trace in guest context"
  default y

config GUEST_CONTEXT_BLOCK_TRACE_SIZE
  int "Number of blocks"
  default 6
  range 1 100
  depends on GUEST_CONTEXT_BLOCK_TRACE

config BLOCK_CACHE_COLLISION_COUNTER
  bool "Count number of collisions in block cache"

config THUMB_IGNORE_IT
  bool "Treat Thumb IT instruction as safe"
  depends on THUMB2

endmenu
