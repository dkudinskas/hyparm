menu "General setup"

config CROSS_COMPILE
  string "Cross-compiler toolchain prefix"

config BUILD_LTO
  bool "Link-time optimization (requires toolchain support)"

config BUILD_SAVE_TEMPS
  bool "Save intermediate files during build (requires GCC >= 4.5)"

choice
  prompt "Decoder"
  default DECODER_TABLE_SEARCH

config DECODER_AUTO
  bool "Auto-generated decoder"

config DECODER_TABLE_SEARCH
  bool "Handcrafted table search decoder"

endchoice

config BLOCK_COPY
  bool "Block copy"
  depends on DECODER_TABLE_SEARCH

endmenu

menu "Physical hardware platform"

config ARCH_V7
  bool

config ARCH_V7_A
  bool
  depends on ARCH_V7

config ARCH_EXT_SECURITY
  bool
  depends on ARCH_V7_A

config CPU_CORTEX_A8
  bool
  depends on ARCH_V7_A

config CPU_CORTEX_A9
  bool
  depends on ARCH_V7_A

config SOC_TI_OMAP_3
  bool
  depends on CPU_CORTEX_A8

config SOC_TI_OMAP_35XX
  bool
  depends on SOC_TI_OMAP_3

config SOC_TI_OMAP_3530
  bool
  depends on SOC_TI_OMAP_35XX

config SOC_TI_OMAP_4
  bool
  depends on CPU_CORTEX_A9

config SOC_TI_OMAP_4430
  bool
  depends on SOC_TI_OMAP_4

choice
  prompt "Board"
  default BOARD_TI_BEAGLE_BOARD

config BOARD_TI_BEAGLE_BOARD
  bool "Texas Instruments BeagleBoard"
  select ARCH_V7
  select ARCH_V7_A
  select ARCH_EXT_SECURITY
  select CPU_CORTEX_A8
  select SOC_TI_OMAP_3
  select SOC_TI_OMAP_35XX
  select SOC_TI_OMAP_3530

config BOARD_TI_PANDA_BOARD
  bool "Texas Instruments PandaBoard"
  select ARCH_V7
  select ARCH_V7_A
  select ARCH_EXT_SECURITY
  select CPU_CORTEX_A9
  select SOC_TI_OMAP_4
  select SOC_TI_OMAP_4430

endchoice

config UART_FAST
  bool "Fast UART (baud rate 500000)"
  depends on BOARD_TI_BEAGLE_BOARD

endmenu

menu "Virtual hardware platform"

config THUMB2
  bool "Thumb-2 instruction set"
  depends on ARCH_V7_A && !BLOCK_COPY && DECODER_TABLE_SEARCH

endmenu

menu "Guest software"

config GUEST_FREERTOS
  bool "FreeRTOS"
  depends on THUMB2

endmenu

menuconfig DEBUG
  bool "Debugging"
  default y

config DEBUG_STARTUP
  bool "Debug startup"
  depends on DEBUG

config DEBUG_MALLOC
  bool "Debug malloc"
  depends on DEBUG

config DEBUG_GUEST_CONTEXT
  bool "Debug guest context routines"
  depends on DEBUG

config DEBUG_EXCEPTION_HANDLERS
  bool "Debug exception handlers"
  depends on DEBUG

config DEBUG_DECODER
  bool "Debug instruction decoding"
  depends on DEBUG

menuconfig DEBUG_SCANNER
  bool "Debug scanner"
  depends on DEBUG

config DEBUG_SCANNER_CALL_SOURCE
  bool "Track call source"
  depends on DEBUG_SCANNER

config DEBUG_SCANNER_COUNT_BLOCKS
  bool "Print number of scanned blocks"
  depends on DEBUG_SCANNER
  select SCANNER_COUNT_BLOCKS

config DEBUG_SCANNER_BLOCK_TRACE
  bool "Print block trace"
  depends on DEBUG_SCANNER

config DEBUG_BLOCK_CACHE
  bool "Debug block cache"
  depends on DEBUG

menuconfig DEBUG_VIRTUAL_PLATFORM
  bool "Debug virtual platform"
  depends on DEBUG

config DEBUG_VP_OMAP_35XX_LIBRARY
  bool "Debug device library"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_TIMER32K
  bool "Debug 32 kHz timer (TIMER32K)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_CM
  bool "Debug clock manager (CM)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_GPIO
  bool "Debug GPIO"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_GPTIMER
  bool "Debug general purpose timers (GPTIMER)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_INTC
  bool "Debug interrupt controller (INTC)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_GPMC
  bool "Debug memory controller (GPMC)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_PRM
  bool "Debug power and reset manager (PRM)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SCM
  bool "Debug system control module (SCM)"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SDMA
  bool "Debug SDMA"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SDRAM
  bool "Debug SDRAM"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_SRAM
  bool "Debug SRAM"
  depends on DEBUG_VIRTUAL_PLATFORM

config DEBUG_VP_OMAP_35XX_UART
  bool "Debug UART"
  depends on DEBUG_VIRTUAL_PLATFORM

config MMC
  bool "Use MMC/SD device to store debug output"
  depends on DEBUG

menu "Hacks"

config BLOCK_COPY_NO_IRQ
  bool "Disable interrupts"
  depends on BLOCK_COPY

config CLI
  bool "Command-line interface"

config EMERGENCY_EXCEPTION_VECTOR
  bool "Emergency exception vector"
  default y
  depends on ARCH_EXT_SECURITY

config SCANNER_COUNT_BLOCKS
  bool "Count number of scanned blocks"

endmenu
